<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/ending_mode.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/ending_mode.py" />
              <option name="originalContent" value="from pico2d import load_image, get_events, clear_canvas, update_canvas, load_font, load_music&#10;from sdl2 import SDL_QUIT, SDL_KEYDOWN, SDLK_ESCAPE, SDL_MOUSEBUTTONDOWN&#10;import game_framework&#10;import play_mode&#10;&#10;&#10;class EndingMode:&#10;    image = None&#10;    font_title = None&#10;    font_button = None&#10;    bgm = None&#10;&#10;    def __init__(self, result):&#10;        self.result = result&#10;&#10;        if EndingMode.image is None:&#10;            EndingMode.image = load_image('ending.png')&#10;&#10;        if EndingMode.font_title is None:&#10;            EndingMode.font_title = load_font('Cafe24PROUP.ttf', 100)&#10;        if EndingMode.font_button is None:&#10;            EndingMode.font_button = load_font('Cafe24PROUP.ttf', 40)&#10;&#10;        self.canvas_w = 1400&#10;        self.canvas_h = 800&#10;&#10;        center_x = self.canvas_w // 2&#10;        base_y = 200&#10;&#10;        self.btn_restart_rect = (center_x - 200, base_y - 30, center_x - 50, base_y + 30)&#10;        self.btn_exit_rect = (center_x + 50, base_y - 30, center_x + 200, base_y + 30)&#10;&#10;        bgm_file = 'ending_clear.wav' if self.result == 'CLEAR' else 'ending_fail.wav'&#10;&#10;        if EndingMode.bgm is None or EndingMode.bgm.file != bgm_file:&#10;            try:&#10;                EndingMode.bgm = load_music(bgm_file)&#10;                EndingMode.bgm.set_volume(64)&#10;            except:&#10;                EndingMode.bgm = None&#10;&#10;    def enter(self):&#10;        if EndingMode.bgm:&#10;            EndingMode.bgm.play()&#10;&#10;    def finish(self):&#10;        if EndingMode.bgm:&#10;            EndingMode.bgm.stop()&#10;&#10;    def update(self):&#10;        pass&#10;&#10;    def draw(self):&#10;        self.image.draw(self.canvas_w // 2, self.canvas_h // 2, 1000, 700)&#10;&#10;        text = &quot;CLEAR!&quot; if self.result == 'CLEAR' else &quot;FAIL&quot;&#10;        text_x = self.canvas_w // 2 - (150 if self.result == 'CLEAR' else 100)&#10;        text_y = self.canvas_h // 2 + 50&#10;&#10;        self.font_title.draw(text_x - 3, text_y, text, (0, 0, 0))&#10;        self.font_title.draw(text_x + 3, text_y, text, (0, 0, 0))&#10;        self.font_title.draw(text_x, text_y - 3, text, (0, 0, 0))&#10;        self.font_title.draw(text_x, text_y + 3, text, (0, 0, 0))&#10;        self.font_title.draw(text_x, text_y, text, (255, 255, 255))&#10;&#10;        r_x, r_y = self.btn_restart_rect[0], (self.btn_restart_rect[1] + self.btn_restart_rect[3]) // 2&#10;        self.font_button.draw(r_x, r_y, &quot;RESTART&quot;, (0, 0, 0))&#10;        self.font_button.draw(r_x + 2, r_y + 2, &quot;RESTART&quot;, (255, 255, 255))&#10;&#10;        e_x, e_y = self.btn_exit_rect[0], (self.btn_exit_rect[1] + self.btn_exit_rect[3]) // 2&#10;        self.font_button.draw(e_x + 30, e_y, &quot;EXIT&quot;, (0, 0, 0))&#10;        self.font_button.draw(e_x + 32, e_y + 2, &quot;EXIT&quot;, (255, 255, 255))&#10;&#10;        update_canvas()&#10;&#10;    def handle_events(self, frame_time=0.0):&#10;        events = get_events()&#10;        for event in events:&#10;            if event.type == SDL_QUIT:&#10;                game_framework.quit()&#10;            elif event.type == SDL_KEYDOWN and event.key == SDLK_ESCAPE:&#10;                game_framework.quit()&#10;            elif event.type == SDL_MOUSEBUTTONDOWN:&#10;                x, y = event.x, self.canvas_h - 1 - event.y&#10;&#10;                if (self.btn_restart_rect[0] &lt;= x &lt;= self.btn_restart_rect[2] and&#10;                        self.btn_restart_rect[1] &lt;= y &lt;= self.btn_restart_rect[3]):&#10;                    game_framework.change_mode(play_mode)&#10;&#10;                elif (self.btn_exit_rect[0] &lt;= x &lt;= self.btn_exit_rect[2] and&#10;                      self.btn_exit_rect[1] &lt;= y &lt;= self.btn_exit_rect[3]):&#10;                    game_framework.quit()" />
              <option name="updatedContent" value="from pico2d import load_image, get_events, clear_canvas, update_canvas, load_font, load_music&#10;from sdl2 import SDL_QUIT, SDL_KEYDOWN, SDLK_ESCAPE, SDL_MOUSEBUTTONDOWN&#10;import game_framework&#10;&#10;&#10;class EndingMode:&#10;    image = None&#10;    font_title = None&#10;    font_button = None&#10;    bgm = None&#10;&#10;    def __init__(self, result):&#10;        self.result = result&#10;&#10;        if EndingMode.image is None:&#10;            EndingMode.image = load_image('ending.png')&#10;&#10;        if EndingMode.font_title is None:&#10;            EndingMode.font_title = load_font('Cafe24PROUP.ttf', 100)&#10;        if EndingMode.font_button is None:&#10;            EndingMode.font_button = load_font('Cafe24PROUP.ttf', 40)&#10;&#10;        self.canvas_w = 1400&#10;        self.canvas_h = 800&#10;&#10;        center_x = self.canvas_w // 2&#10;        base_y = 200&#10;&#10;        self.btn_restart_rect = (center_x - 200, base_y - 30, center_x - 50, base_y + 30)&#10;        self.btn_exit_rect = (center_x + 50, base_y - 30, center_x + 200, base_y + 30)&#10;&#10;        bgm_file = 'ending_clear.wav' if self.result == 'CLEAR' else 'ending_fail.wav'&#10;&#10;        if EndingMode.bgm is None or EndingMode.bgm.file != bgm_file:&#10;            try:&#10;                EndingMode.bgm = load_music(bgm_file)&#10;                EndingMode.bgm.set_volume(64)&#10;            except:&#10;                EndingMode.bgm = None&#10;&#10;    def enter(self):&#10;        if EndingMode.bgm:&#10;            EndingMode.bgm.play()&#10;&#10;    def finish(self):&#10;        if EndingMode.bgm:&#10;            EndingMode.bgm.stop()&#10;&#10;    def update(self):&#10;        pass&#10;&#10;    def draw(self):&#10;        self.image.draw(self.canvas_w // 2, self.canvas_h // 2, 1000, 700)&#10;&#10;        text = &quot;CLEAR!&quot; if self.result == 'CLEAR' else &quot;FAIL&quot;&#10;        text_x = self.canvas_w // 2 - (150 if self.result == 'CLEAR' else 100)&#10;        text_y = self.canvas_h // 2 + 50&#10;&#10;        self.font_title.draw(text_x - 3, text_y, text, (0, 0, 0))&#10;        self.font_title.draw(text_x + 3, text_y, text, (0, 0, 0))&#10;        self.font_title.draw(text_x, text_y - 3, text, (0, 0, 0))&#10;        self.font_title.draw(text_x, text_y + 3, text, (0, 0, 0))&#10;        self.font_title.draw(text_x, text_y, text, (255, 255, 255))&#10;&#10;        r_x, r_y = self.btn_restart_rect[0], (self.btn_restart_rect[1] + self.btn_restart_rect[3]) // 2&#10;        self.font_button.draw(r_x, r_y, &quot;RESTART&quot;, (0, 0, 0))&#10;        self.font_button.draw(r_x + 2, r_y + 2, &quot;RESTART&quot;, (255, 255, 255))&#10;&#10;        e_x, e_y = self.btn_exit_rect[0], (self.btn_exit_rect[1] + self.btn_exit_rect[3]) // 2&#10;        self.font_button.draw(e_x + 30, e_y, &quot;EXIT&quot;, (0, 0, 0))&#10;        self.font_button.draw(e_x + 32, e_y + 2, &quot;EXIT&quot;, (255, 255, 255))&#10;&#10;        update_canvas()&#10;&#10;    def handle_events(self, frame_time=0.0):&#10;        events = get_events()&#10;        for event in events:&#10;            if event.type == SDL_QUIT:&#10;                game_framework.quit()&#10;            elif event.type == SDL_KEYDOWN and event.key == SDLK_ESCAPE:&#10;                game_framework.quit()&#10;            elif event.type == SDL_MOUSEBUTTONDOWN:&#10;                x, y = event.x, self.canvas_h - 1 - event.y&#10;&#10;                if (self.btn_restart_rect[0] &lt;= x &lt;= self.btn_restart_rect[2] and&#10;                        self.btn_restart_rect[1] &lt;= y &lt;= self.btn_restart_rect[3]):&#10;                    # import play_mode lazily to avoid circular import&#10;                    import play_mode&#10;                    game_framework.change_mode(play_mode)&#10;&#10;                elif (self.btn_exit_rect[0] &lt;= x &lt;= self.btn_exit_rect[2] and&#10;                      self.btn_exit_rect[1] &lt;= y &lt;= self.btn_exit_rect[3]):&#10;                    game_framework.quit()" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>